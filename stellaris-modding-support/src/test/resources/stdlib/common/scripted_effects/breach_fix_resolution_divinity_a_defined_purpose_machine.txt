breach_fix_resolution_divinity_a_defined_purpose_machine = {
	if = {
		limit = {
			is_active_resolution = "resolution_divinity_a_defined_purpose"
			in_breach_of = resolution_divinity_a_defined_purpose
			is_machine_empire = yes
			NOT = { has_valid_civic = civic_machine_servitor }
			NOT = { has_valid_civic = civic_machine_assimilator }
			exists = event_target:defined_purpose_random_species
		}
		hidden_effect = {
			if = {
				limit = {
					has_origin = origin_machine
				}
				set_origin = origin_default
			}
			force_add_civic = civic_machine_servitor

			capital_scope = {
				create_pop = {
					species = event_target:defined_purpose_random_species
				}
			}
		}

		custom_tooltip = "federations.10340.complybecomerogueservitor_tooltip"
	} else_if = {
		limit = {
			is_active_resolution = "resolution_divinity_a_defined_purpose"
			in_breach_of = resolution_divinity_a_defined_purpose
			is_machine_empire = yes
			NOT = { has_valid_civic = civic_machine_servitor }
			NOT = { has_valid_civic = civic_machine_assimilator }
			NOT = { exists = event_target:defined_purpose_random_species }
		}
		hidden_effect = {
			if = {
				limit = {
					has_origin = origin_machine
				}
				set_origin = origin_default
			}
			force_add_civic = civic_machine_servitor

			create_species = {
				name = random
				class = random_non_machine
				portrait = random
				traits = random
				effect = {
					save_event_target_as = defined_purpose_backup_species
				}
			}

			capital_scope = {
				create_pop = {
					species = event_target:defined_purpose_backup_species
				}
			}
		}

		custom_tooltip = "federations.10340.complybecomerogueservitor_tooltip"
	}
}
