create_gray_warship = {
	if = {
		limit = { has_country_flag = gray_governor_active }
		remove_country_flag = gray_governor_active
		event_target:gray_governor = {
			kill_leader = { show_notification = no } 
		}
	}
	if = {
		limit = { has_country_flag = gray_army_active }
		if = {
			limit = {
				any_owned_army = {
					army_type = gray_army
					exists = planet
				}
			}
			random_owned_army = {
				limit = { army_type = gray_army }
				planet = { save_event_target_as = gray_warship_location }
			}
		}
		else = {
			random_owned_army = {
				limit = { army_type = gray_army }
				fleet = { save_event_target_as = gray_warship_location }
			}
		}
	}
	else = {
		capital_scope = { save_event_target_as = gray_warship_location }
	}
	set_country_flag = gray_warship_active
	create_fleet = {
		name = "NAME_Gray"
		settings = {
			can_upgrade = no
			can_change_composition = no
			can_change_leader = no
			uses_naval_capacity = no
			spawn_debris = no
		}
		effect = {
			set_owner = root
			create_ship = {
				name = "NAME_Gray"
				design = "NAME_Gray_Warship"
				prefix = no
				upgradable = no
			}
			save_global_event_target_as = gray_warship
			set_location = event_target:gray_warship_location
			add_modifier = {
				modifier = "gray_warship"
				days = -1
			}
		}
	}
	if = {
		limit = { has_country_flag = gray_army_active }
		remove_country_flag = gray_army_active
		every_owned_army = {
			limit = { army_type = gray_army }
			remove_army = yes
		}
	}
}
