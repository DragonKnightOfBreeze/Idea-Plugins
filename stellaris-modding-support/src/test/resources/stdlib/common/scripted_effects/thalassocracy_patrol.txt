thalassocracy_patrol = {
	if = { #Visit every planet in a system once
		limit = {
			solar_system = {
				any_system_planet = {
					NOT = { has_planet_flag = thalassocracy_visited }
				}
			}
		}
		solar_system = {
			random_system_planet = {
				limit = {
					NOT = { has_planet_flag = thalassocracy_visited }
				}
				save_global_event_target_as = thalassocracy_target_planet
				set_planet_flag = thalassocracy_visited
			}
		}
	}
	else_if = { #Leave for the next unvisited system
		limit = {
			solar_system = {
				any_neighbor_system = {
					any_system_planet = {
						NOT = { has_planet_flag = thalassocracy_visited }
					}
				}
			}
		}
		solar_system = {
			random_neighbor_system = {
				limit = {
					any_system_planet = {
						NOT = { has_planet_flag = thalassocracy_visited }
					}
				}
				save_global_event_target_as = thalassocracy_target_system
				random_system_planet = {
					limit = {
						NOT = { has_planet_flag = thalassocracy_visited }
					}
					save_global_event_target_as = thalassocracy_target_planet
					set_planet_flag = thalassocracy_visited
				}
			}
		}
	}
	else = {
		event_target:thalassocracy_spawn_planet = {
			save_global_event_target_as = thalassocracy_target_planet
		}
	}
	auto_move_to_planet = {
		target = event_target:thalassocracy_target_planet
		clear_auto_move_on_arrival = no
		arrival_effect = thalassocracy_patrol
	}
}
