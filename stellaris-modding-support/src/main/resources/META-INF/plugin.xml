<idea-plugin>
  <id>com.windea.stellaris</id>
  <name>Stellaris Modding Support</name>
  <category>Languages</category>

  <vendor email="dk_breeze@qq.com" url="https://github.com/DragonKnightOfBreeze">DragonKnightOfBreeze</vendor>

  <depends>com.intellij.modules.lang</depends>

  <description><![CDATA[
    <p>Support for Stellaris modding.</p>
    <ul>
      <li>Support Stellaris Script Language. (*.txt, *.mod, *.gfx, *.gui, *.asset)</li>
      <li>Support Stellaris Localization Language. (*.yml, *.yaml)</li>
      <li>Basic language features has been implemented. (e.g. Syntax highlight, File structure, Code format)</li>
      <li>Extended language features has been implemented. (e.g. Find usages, Go to declaration)</li>
      <li>More complex language features are implementing. (e.g. Script file validation)</li>
      <li>
        All planned language feature are listed in the
        <a href="https://github.com/DragonKnightOfBreeze/Idea-Plugins/blob/master/stellaris-modding-support/README.md">README</a>
        document of this project. (Simple Chinese)
      </li>
    </ul>
    <p>
      Please note that why I develop this plugin is simply: to write Stellaris mods easily
      (and take the first step ),
      however, some other games may also use such script language and localization language.
    </p>
    <p>
      Please note that you should provide the descriptor file aka <code>descriptor.mod</code>,
      this plugin will only recognize script / localization files under a directory,
      which has a descriptor file in it.
    </p>
    <p>
      Yu can configure whether to resolve internal (in project directory) &
      external (in game / mod directory, <b>NOT IMPLEMENTED YET</b>) references,
      such as localization & script property references in script files
      by Edit settings via <b>[Languages & Frameworks / Stellaris Modding Support]</b>.
      Default all to false.
    </p>
    <p>
      Please note that <b>Paradox Interactive</b>'s modding language is actually very complex and even more chaos,
      so that this plugin maybe have some <i>syntax compatibility problems</i> and <i>reference problems</i>.
    </p>
    <P>
      You can also write Stellaris mods by VSCode IDE with CWTools plugin,
      but please note that IDEA is undoubtedly more powerful than VSCode.
      which means that this plugin may support some advance features that CWTTools will never provide.
    </P>
    <p>
      This plugin is still in developing,
      if you have found any bugs or problems, feel free to report them in project's
      <a href="https://github.com/DragonKnightOfBreeze/Idea-Plugins/issues">Github Issue Page</a>.
      (With label <i>stellaris-modding-support</i>)
    </p>
    <p>
      Welcome to have a look at
      <a href="https://github.com/DragonKnightOfBreeze/Idea-Plugins/tree/master/stellaris-modding-support">this project</a>,
      <a href="https://github.com/DragonKnightOfBreeze?tab=repositories">my other projects</a> and
      <a href="https://steamcommunity.com/id/DragonKnightOfBreeze/myworkshopfiles/?appid=281990&browsefilter=myfiles&browsesort=myfiles&p=1">my stellaris mods</a>.
    </p>

    <br>

    <p>Stellaris模组编程支持。</p>
    <ul>
      <li>支持Stellaris的脚本语言。(*.txt, *.mod, *.gfx, *.gui, *.asset)</li>
      <li>支持Stellaris的本地化语言。(*.yml, *.yaml)</li>
      <li>已实现基本的语言特性。（如，代码高亮，文件结构，代码格式化）</li>
      <li>已实现扩展的语言特性。（如，查找使用，定位到定义）</li>
      <li>正在实现更加复杂的语言特性。（如，验证脚本文件）</li>
      <li>
        所有计划中的语言特性都已在项目的
        <a href="https://github.com/DragonKnightOfBreeze/Idea-Plugins/blob/master/stellaris-modding-support/README.md">README</a>
        文档中列出。（中文）
      </li>
    </ul>
    <p>
      请注意，我开发这个插件的目的仅仅只是为了便于开发Stellaris的mod（以及熟悉IDEA插件开发），
      不过，其他游戏可能也会使用到这个插件所支持的脚本语言和本地化语言。
    </p>
    <p>
      请注意，你需要提供描述符文件即<code>descriptor.mod</code>，
      这个插件仅会识别描述符文件所在目录下（及其子目录）的脚本文件和本地化文件。
    </p>
    <p>
      你可以通过设置菜单中的<b>[Languages & Frameworks / Stellaris Modding Support]</b>
      配置是否解析内部引用（项目目录中）和外部引用（游戏和模组目录中，<b>尚未实现</b>），
      例如脚本文件中的本地化属性和脚本属性的引用。
      默认全部不启用。
    </p>
    <p>
      请注意，<b>瑞典蠢驴</b>的模组语言实际上是非常非常复杂的，
      因此这个插件仍然可能存在一些<i>语法解析兼容性问题</i>以及<i>引用问题</i>。
    </p>
    <P>
      你也可以使用VSCode IDE并配合CWTools插件来进行Stellaris模组编程。
      但请注意，IDEA相比VSCode功能无疑更加强大，
      这意味着这个插件未来可能会提供一些CWTTools所不可能支持的高级功能。
    </P>
    <p>
      这个插件仍然在更新中，如果遇到BUG或问题，欢迎在项目的
      <a href="https://github.com/DragonKnightOfBreeze/Idea-Plugins/issues">Github Issue页面</a>
      中提出。（附带标签<i>stellaris-modding-support</i>）
    </p>
    <p>
      欢迎查看
      <a href="https://github.com/DragonKnightOfBreeze/Idea-Plugins/tree/master/stellaris-modding-support">本项目</a>，
      <a href="https://github.com/DragonKnightOfBreeze?tab=repositories">我的其他项目</a>以及
      <a href="https://steamcommunity.com/id/DragonKnightOfBreeze/myworkshopfiles/?appid=281990&browsefilter=myfiles&browsesort=myfiles&p=1">我的群星模组</a>。
    </p>
    ]]></description>

  <change-notes><![CDATA[
    <p>
      See the whole changelog at the
      <a href="https://github.com/DragonKnightOfBreeze/Idea-Plugins/blob/master/stellaris-modding-support/README.md">README</a> and
      <a href="https://github.com/DragonKnightOfBreeze/Idea-Plugins/blob/master/stellaris-modding-support/CHANGELOG.md">CHANGELOG</a>
      document of this project. (Simple Chinese)
    </p>

    <br>

    <p>
      通过项目的
      <a href="https://github.com/DragonKnightOfBreeze/Idea-Plugins/blob/master/stellaris-modding-support/README.md">README</a> 文档和
      <a href="https://github.com/DragonKnightOfBreeze/Idea-Plugins/blob/master/stellaris-modding-support/CHANGELOG.md">CHANGELOG</a> 文档
      查看完整的更新日志。（中文）
    </p>
    ]]></change-notes>

  <extensions defaultExtensionNs="com.intellij">
    <!--region Stellaris Settings-->
    <applicationConfigurable
      id="settings.language.stellaris"
      groupId="language"
      instance="com.windea.plugin.idea.stellaris.settings.StellarisSettingsConfigurable"/>
    <applicationService
      serviceImplementation="com.windea.plugin.idea.stellaris.settings.StellarisSettingsState"/>
    <!--endregion-->

    <!--suppress PluginXmlValidity -->
    <fileTypeOverrider implementation="com.windea.plugin.idea.stellaris.StellarisFileTypeOverrider"/>

    <!--region Stellaris Localization Language-->
    <fileType
      language="Stellaris Localization"
      name="Stellaris Localization File" fieldName="INSTANCE"
      implementationClass="com.windea.plugin.idea.stellaris.localization.StellarisLocalizationFileType"/>

    <lang.parserDefinition
      language="Stellaris Localization"
      implementationClass="com.windea.plugin.idea.stellaris.localization.psi.StellarisLocalizationParserDefinition"/>
    <lang.syntaxHighlighterFactory
      language="Stellaris Localization"
      implementationClass="com.windea.plugin.idea.stellaris.localization.highlighter.StellarisLocalizationSyntaxHighlighterFactory"/>
    <lang.braceMatcher
      language="Stellaris Localization"
      implementationClass="com.windea.plugin.idea.stellaris.localization.editor.StellarisLocalizationBraceMatcher"/>
    <lang.foldingBuilder
      language="Stellaris Localization"
      implementationClass="com.windea.plugin.idea.stellaris.localization.editor.StellarisLocalizationFoldingBuilder"/>
    <colorSettingsPage
      implementation="com.windea.plugin.idea.stellaris.localization.highlighter.StellarisLocalizationColorSettingsPage"/>
    <lang.commenter
      language="Stellaris Localization"
      implementationClass="com.windea.plugin.idea.stellaris.localization.editor.StellarisLocalizationCommenter"/>
    <spellchecker.support
      language="Stellaris Localization"
      implementationClass="com.windea.plugin.idea.stellaris.localization.StellarisLocalizationSpellchecker"/>
    <lang.refactoringSupport
      language="Stellaris Localization"
      implementationClass="com.windea.plugin.idea.stellaris.localization.refactoring.StellarisLocalizationRefactoringSupportProvider"/>
    <renameInputValidator
      implementation="com.windea.plugin.idea.stellaris.localization.refactoring.StellarisLocalizationPropertyRenameInputValidator"/>
    <refactoring.safeDeleteProcessor
      implementation="com.windea.plugin.idea.stellaris.localization.refactoring.StellarisLocalizationPropertySafeDeleteProcessor"/>
    <completion.contributor
      language="Stellaris Localization"
      implementationClass="com.windea.plugin.idea.stellaris.localization.codeInsight.StellarisLocalizationCompletionContributor"/>
    <liveTemplateContext
      implementation="com.windea.plugin.idea.stellaris.localization.editor.StellarisLocalizationTemplateContext"/>
    <defaultLiveTemplates file="/liveTemplates/Stellaris Localization.xml"/>
    <breadcrumbsInfoProvider
      implementation="com.windea.plugin.idea.stellaris.localization.editor.StellarisLocalizationBreadCrumbsProvider"/>
    <lang.psiStructureViewFactory
      language="Stellaris Localization"
      implementationClass="com.windea.plugin.idea.stellaris.localization.structureView.StellarisLocalizationStructureViewFactory"/>
    <lang.formatter
      language="Stellaris Localization"
      implementationClass="com.windea.plugin.idea.stellaris.localization.formatter.StellarisLocalizationFormattingModelBuilder"/>
    <codeStyleSettingsProvider
      implementation="com.windea.plugin.idea.stellaris.localization.formatter.StellarisLocalizationCodeStyleSettingsProvider"/>
    <langCodeStyleSettingsProvider
      implementation="com.windea.plugin.idea.stellaris.localization.formatter.StellarisLocalizationLanguageCodeStyleSettingsProvider"/>
    <lang.quoteHandler
      language="Stellaris Localization"
      implementationClass="com.windea.plugin.idea.stellaris.localization.editor.StellarisLocalizationQuoteHandler"/>
    <lang.documentationProvider
      language="Stellaris Localization"
      implementationClass="com.windea.plugin.idea.stellaris.localization.editor.StellarisLocalizationDocumentationProvider"/>
    <elementDescriptionProvider
      implementation="com.windea.plugin.idea.stellaris.localization.editor.StellarisLocalizationDescriptionProvider"/>

    <lang.findUsagesProvider
      language="Stellaris Localization"
      implementationClass="com.windea.plugin.idea.stellaris.localization.navigation.StellarisLocalizationFindUsagesProvider"/>
    <gotoDeclarationHandler
      implementation="com.windea.plugin.idea.stellaris.localization.navigation.StellarisLocalizationGoToDeclarationHandler"/>
    <annotator
      language="Stellaris Localization"
      implementationClass="com.windea.plugin.idea.stellaris.localization.StellarisLocalizationAnnotator"/>

    <intentionAction>
      <className>com.windea.plugin.idea.stellaris.localization.intentions.ChangeLocaleIntention</className>
      <category>Stellaris localization</category>
    </intentionAction>
    <intentionAction>
      <className>com.windea.plugin.idea.stellaris.localization.intentions.ChangeColorIntention</className>
      <category>Stellaris localization</category>
    </intentionAction>
    <intentionAction>
      <className>com.windea.plugin.idea.stellaris.localization.intentions.ChangeSerialNumberIntention</className>
      <category>Stellaris localization</category>
    </intentionAction>

    <localInspection
      language="Stellaris Localization"
      shortName="StellarisLocalizationDuplicatePropertyKeys" bundle="messages.StellarisBundle"
      groupKey="stellaris.localization.inspection" key="stellaris.localization.inspection.duplicatePropertyKeys"
      enabledByDefault="true" level="ERROR"
      implementationClass="com.windea.plugin.idea.stellaris.localization.inspections.DuplicatePropertyKeysInspection"/>
    <localInspection
      language="Stellaris Localization"
      shortName="StellarisLocalizationInvalidFileEncoding" bundle="messages.StellarisBundle"
      groupKey="stellaris.localization.inspection" key="stellaris.localization.inspection.invalidFileEncoding"
      enabledByDefault="true" level="WARNING"
      implementationClass="com.windea.plugin.idea.stellaris.localization.inspections.InvalidFileEncodingInspection"/>
    <!--endregion-->

    <!--region Stellaris Script Language-->
    <fileType
      language="Stellaris Script"
      name="Stellaris Script File" fieldName="INSTANCE"
      implementationClass="com.windea.plugin.idea.stellaris.script.StellarisScriptFileType"/>
    <lang.parserDefinition
      language="Stellaris Script"
      implementationClass="com.windea.plugin.idea.stellaris.script.psi.StellarisScriptParserDefinition"/>
    <lang.syntaxHighlighterFactory
      language="Stellaris Script"
      implementationClass="com.windea.plugin.idea.stellaris.script.highlighter.StellarisScriptSyntaxHighlighterFactory"/>
    <lang.braceMatcher
      language="Stellaris Script"
      implementationClass="com.windea.plugin.idea.stellaris.script.editor.StellarisScriptBraceMatcher"/>
    <lang.foldingBuilder
      language="Stellaris Script"
      implementationClass="com.windea.plugin.idea.stellaris.script.editor.StellarisScriptFoldingBuilder"/>
    <colorSettingsPage
      implementation="com.windea.plugin.idea.stellaris.script.highlighter.StellarisScriptColorSettingsPage"/>
    <lang.commenter
      language="Stellaris Script"
      implementationClass="com.windea.plugin.idea.stellaris.script.editor.StellarisScriptCommenter"/>
    <spellchecker.support
      language="Stellaris Script"
      implementationClass="com.windea.plugin.idea.stellaris.script.StellarisScriptSpellchecker"/>
    <lang.refactoringSupport
      language="Stellaris Script"
      implementationClass="com.windea.plugin.idea.stellaris.script.refactoring.StellarisScriptRefactoringSupportProvider"/>
    <renameInputValidator
      implementation="com.windea.plugin.idea.stellaris.script.refactoring.StellarisScriptVariableRenameInputValidator"/>
    <renameInputValidator
      implementation="com.windea.plugin.idea.stellaris.script.refactoring.StellarisScriptPropertyRenameInputValidator"/>
    <refactoring.safeDeleteProcessor
      implementation="com.windea.plugin.idea.stellaris.script.refactoring.StellarisScriptVariableSafeDeleteProcessor"/>
    <refactoring.inlineHandler
      language="Stellaris Script"
      implementationClass="com.windea.plugin.idea.stellaris.script.refactoring.StellarisScriptInlineHandler"/>
    <completion.contributor
      language="Stellaris Script"
      implementationClass="com.windea.plugin.idea.stellaris.script.codeInsight.StellarisScriptCompletionContributor"/>
    <breadcrumbsInfoProvider
      implementation="com.windea.plugin.idea.stellaris.script.editor.StellarisScriptBreadCrumbsProvider"/>
    <colorProvider
      implementation="com.windea.plugin.idea.stellaris.script.editor.StellarisScriptColorProvider"/>
    <lang.psiStructureViewFactory
      language="Stellaris Script"
      implementationClass="com.windea.plugin.idea.stellaris.script.structureView.StellarisScriptStructureViewFactory"/>
    <lang.formatter
      language="Stellaris Script"
      implementationClass="com.windea.plugin.idea.stellaris.script.formatter.StellarisScriptFormattingModelBuilder"/>
    <codeStyleSettingsProvider
      implementation="com.windea.plugin.idea.stellaris.script.formatter.StellarisScriptCodeStyleSettingsProvider"/>
    <langCodeStyleSettingsProvider
      implementation="com.windea.plugin.idea.stellaris.script.formatter.StellarisScriptLanguageCodeStyleSettingsProvider"/>
    <lang.quoteHandler
      language="Stellaris Script"
      implementationClass="com.windea.plugin.idea.stellaris.script.editor.StellarisScriptQuoteHandler"/>
    <lang.documentationProvider
      language="Stellaris Script"
      implementationClass="com.windea.plugin.idea.stellaris.script.editor.StellarisScriptDocumentationProvider"/>
    <elementDescriptionProvider
      implementation="com.windea.plugin.idea.stellaris.script.editor.StellarisScriptDescriptionProvider"/>

    <lang.findUsagesProvider
      language="Stellaris Script"
      implementationClass="com.windea.plugin.idea.stellaris.script.navigation.StellarisScriptFindUsagesProvider"/>
    <gotoDeclarationHandler
      implementation="com.windea.plugin.idea.stellaris.script.navigation.StellarisScriptGoToDeclarationHandler"/>
    <annotator
      language="Stellaris Script"
      implementationClass="com.windea.plugin.idea.stellaris.script.StellarisScriptAnnotator"/>

    <additionalTextAttributes scheme="Default" file="colorSchemes/StellarisLocalizationDefault.xml"/>
    <additionalTextAttributes scheme="Darcula" file="colorSchemes/StellarisLocalizationDarcula.xml"/>

    <localInspection
      language="Stellaris Script"
      shortName="StellarisScriptDuplicateVariableDefinitions" bundle="messages.StellarisBundle"
      groupKey="stellaris.script.inspection"
      key="stellaris.script.inspection.duplicateVariableDefinitions"
      enabledByDefault="true" level="ERROR"
      implementationClass="com.windea.plugin.idea.stellaris.script.inspections.DuplicateVariableDefinitionsInspection"/>
    <localInspection
      language="Stellaris Script"
      shortName="StellarisScriptInvalidFileEncoding" bundle="messages.StellarisBundle"
      groupKey="stellaris.script.inspection"
      key="stellaris.script.inspection.invalidFileEncoding"
      enabledByDefault="true" level="WARNING"
      implementationClass="com.windea.plugin.idea.stellaris.script.inspections.InvalidFileEncodingInspection"/>
    <!--endregion-->

    <!--region Stellaris Script Schema-->
    <json.jsonSchemaEnabler
      implementation="com.windea.plugin.idea.stellaris.script.schema.StellarisScriptSchemaEnabler"/>
    <completion.contributor
      language="Stellaris Script"
      implementationClass="com.windea.plugin.idea.stellaris.script.schema.StellarisScriptSchemaCompletionContributor"/>
    <gotoDeclarationHandler
      implementation="com.windea.plugin.idea.stellaris.script.schema.StellarisScriptSchemaGotoDeclarationHandler"/>
    <json.jsonLikePsiWalkerFactory
      implementation="com.windea.plugin.idea.stellaris.script.schema.StellarisScriptJsonLikePsiWalkerFactory"/>
    <!--<documentationProvider
      implementation="com.windea.plugin.idea.stellaris.script.schema.StellarisScriptSchemaDocumentationProvider"/>-->

    <additionalTextAttributes scheme="Default" file="colorSchemes/StellarisScriptDefault.xml"/>
    <additionalTextAttributes scheme="Darcula" file="colorSchemes/StellarisScriptDarcula.xml"/>

    <localInspection
      language="Stellaris Script"
      shortName="StellarisScriptSchemaValidation" bundle="messages.StellarisBundle"
      groupKey="stellaris.script.inspection" key="stellaris.script.inspection.schemaValidation"
      enabledByDefault="true" level="ERROR"
      implementationClass="com.windea.plugin.idea.stellaris.script.schema.StellarisScriptSchemaInspectionTool"/>
    <!--endregion-->
  </extensions>

  <extensions defaultExtensionNs="JavaScript">
    <JsonSchema.ProviderFactory
      implementation="com.windea.plugin.idea.stellaris.script.schema.StellarisScriptSchemaProviderFactory"/>
  </extensions>
</idea-plugin>
