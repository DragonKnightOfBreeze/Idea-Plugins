# 概述

Stellaris模组编程支持。

目前仍在烧脑更新中……

# 功能

## Stellaris Localization Language

* [X] 语言和文件类型
* [X] 语法和词法解析
* [X] 语法高亮
  * [X] 基本高亮
  * [X] 转义字符
  * [X] 属性引用 `$REFERENCE$`
  * [X] 内联代码 `[CODE]`
  * [X] 内联图标 `£icon£`
  * [X] 编号 `%O%`
  * [X] 颜色文本 `§RText§`
* [X] 代码折叠
  * [X] 单行注释 -> `#...`
* [X] 括号适配器
  * [X] `[...]` `"..."` `$...$` 等 
* [X] 颜色风格设置
* [X] 注释器
* [X] 拼写检查器
* [X] 代码补全
  * [X] 语言区域（如：`l_english`）
* [X] 动态模版
  * [X] 属性引用
  * [X] 内联代码
  * [X] 内联图标
  * [X] 编号
  * [X] 颜色文本
* [X] 面包屑导航
* [X] 结构视图
* [X] 引用
  * [X] 属性引用
* [X] 代码重构
  * [X] 重命名属性
  * [X] 重命名属性的合法性检查
  * [X] 安全删除属性
* [X] 代码格式设置
* [X] 格式化
* [X] 提供文档注释
  * [X] 属性
  * [X] 语言区域、颜色、图标等（描述）
* [X] 提供描述（查找使用时要用到）
* [X] 定位定义
  * [X] 属性 -> 同一文件中的属性定义
  * [X] 属性 -> 项目文件中的属性定义
* [X] 定位使用
  * [X] 属性 -> 属性引用，脚本文件的属性值 ？ 
* [X] 注解器
  * [X] 将颜色文本的颜色代码注为对应的字体颜色，~~并显示对应颜色的图标~~
  * [X] 将不支持的语言区域/编号等突出显示，并显示错误信息，提供快速修正
* [X] 意向 Intention
  * [X] 更改语言区域
  * [X] 更改颜色
  * [X] 更改编号
* [X] 代码检查 Inspection
  * [X] ［错误］重复的属性 → 导航到重复的属性
  * [X] ［错误］不支持的语言区域 → 选择语言区域（语法上允许其他语言区域）
  * [X] ［警告］非法的文件编码 → 转化为正确的文件编码（必须是`UTF-8 BOM`）
  * [X] ~~［警告］非法的文件名 （必须包含语言区域字符串如`l_simp_chinese`）~~

对Stellaris本地化语言的支持。 

## Stellaris Script Language

* [X] 语言和文件类型
* [X] 语法和词法解析
* [X] 语法高亮
  * [X] 基本高亮
* [X] 代码折叠
  * [X] 列表 -> `{...}`
  * [X] 单行注释 -> `#...`
* [X] 括号适配器
  * [X] `{...}` `"..."` 
* [X] 颜色风格设置
* [X] 注释器
* [X] 拼写检查器
* [X] 代码补全
  * [X] 关键字 `yes`/`no`
* [X] 动态模版
  * [X] 来自本地化文件的动态模版 
* [X] 面包屑导航
* [X] 结构视图
* [X] 引用
  * [X] 变量引用
  * [X] 属性引用
* [X] 代码重构
  * [X] 重命名变量
  * [X] 重命名变量的合法性检查
  * [X] 安全删除变量
  * [ ] 内联变量
* [X] 代码格式设置
* [X] 格式化
* [X] 提供文档注释
  * [X] 变量
  * [X] 属性
* [X] 提供描述（查找使用时要用到）
* [X] 定位定义
  * [X] 变量引用 -> 变量定义
  * [X] 字符串 -> 可能的脚本文件的属性
  * [X] 字符串 -> 可能的本地化文件的属性
* [X] 定位使用
  * [X] 变量 -> 属性值
* [X] 注解器
  * [X] 将可能是脚本文件/本地化文件的属性引用的字符串注为属性引用，并显示属性的图标
  * [X] 对于颜色类型，在页面左侧显示对应颜色的图标，并且可以点击图标更改颜色
* [X] 意向 Intention
* [X] 代码检查 Inspection
  * [X] ［错误］重复的变量定义 → 导航到重复的变量定义
  * [X] ［警告］非法的文件编码 → 转化为正确的文件编码（除了name_list是`UTF-8 BOM`之外，必须是`UTF-8 NO BOM`）

对Stellaris脚本语言的支持。

## Stellaris Script Schema

基于Json Schema对Stellaris脚本进行验证。

* [X] 代码提示
* [X] 定位定义
* [X] 代码检查
* [ ] 文档注释
* [ ] 提供较为完善的Schema规则
* [ ] 为特定位置的脚本文件绑定对应的Schema规则
* [ ] 实现特殊的Schema规则（如将字符串解析为路径、模组路径）

# 注意事项

* 只有在包含descriptor.mod文件的文件夹下的相关文件才应被识别为本地化文件和脚本文件
* 本地化文件的属性值中的双引号可以不转义
* IDEA似乎存在jar包中的Schema文件的跨文件规则无法正常识别的BUG
* 存在其他合法的颜色码，但是这个插件认为是不支持的
* 通过快速修正更改了文件编码和BOM之后，必须真正编辑文件内容才会进行下一次检查，让上方的警告消失

